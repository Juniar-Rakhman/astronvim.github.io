<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Recipes/advanced_lsp">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Advanced LSP Setup | AstroNvim</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://astronvim.github.io/nightly/Recipes/advanced_lsp"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="vim, lua, neovim, ide, nvim, nvim-configuration, neovim-lua, neovim-config, neovim-setup, astrovim, astronvim, astro"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced LSP Setup | AstroNvim"><meta data-rh="true" name="description" content="Customizing auto-format on save"><meta data-rh="true" property="og:description" content="Customizing auto-format on save"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://astronvim.github.io/nightly/Recipes/advanced_lsp"><link data-rh="true" rel="alternate" href="https://astronvim.github.io/nightly/Recipes/advanced_lsp" hreflang="en"><link data-rh="true" rel="alternate" href="https://astronvim.github.io/nightly/Recipes/advanced_lsp" hreflang="x-default"><link rel="preconnect" href="https://matomo.mehalter.com/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://matomo.mehalter.com/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","9"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.2c37ae1b.css">
<link rel="preload" href="/assets/js/runtime~main.04c6d08e.js" as="script">
<link rel="preload" href="/assets/js/main.6be3225d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/astronvim.svg" alt="AstroNvim Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo/astronvim.svg" alt="AstroNvim Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AstroNvim</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/nightly">nightly</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/nightly/Recipes/advanced_lsp">nightly</a></li><li><a class="dropdown__link" href="/Recipes/advanced_lsp">2.4.0</a></li><li><a class="dropdown__link" href="/2.3.0/Recipes/advanced_lsp">2.3.0</a></li><li><a class="dropdown__link" href="/2.2.0/Recipes/advanced_lsp">2.2.0</a></li><li><a class="dropdown__link" href="/2.1.0/Recipes/advanced_lsp">2.1.0</a></li><li><a class="dropdown__link" href="/2.0.0/Recipes/advanced_lsp">2.0.0</a></li><li><a class="dropdown__link" href="/1.9.0/Recipes/advanced_lsp">1.9.0</a></li><li><a class="dropdown__link" href="/1.8.0/Recipes/advanced_lsp">1.8.0</a></li><li><a class="dropdown__link" href="/1.7.0">1.7.0</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/AstroNvim/AstroNvim" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nightly">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/nightly/Basic Usage/walkthrough">Basic Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/nightly/Configuration/manage_user_config">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/nightly/Recipes/black_belt">Recipes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/black_belt">Black Belt Example User Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/nightly/Recipes/advanced_lsp">Advanced LSP Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/alpha">Dashboard Customizations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/cmdheight">Disable cmdheight=0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/cmp">Customize cmp Completion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/colorscheme">Custom Colorscheme</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/disable_winbar">Disable Winbar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/globalstatus">Disable Global Statusbar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/icons">Customize Icons</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/snippets">Custom VS Code Style Snippets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/status">Customizing Statusline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/telescope_theme">NvChad Telescope Theme</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nightly/Recipes/unattended_install">Unattended Installation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nightly/acknowledgements">Acknowledgements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://astronvim.github.io/AstroNvim" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Core Lua API Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->AstroNvim<!-- --> <b>nightly</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Recipes/advanced_lsp">latest version</a></b> (<!-- -->2.4.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Recipes</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced LSP Setup</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: nightly</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Advanced LSP Setup</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-auto-format-on-save">Customizing auto-format on save<a class="hash-link" href="#customizing-auto-format-on-save" title="Direct link to heading">​</a></h3><p>AstroNvim has made formatting on save part of the default functionality out of the box. If you don&#x27;t want your code to get auto formatted on save, you can disable it in your <code>lsp.formatting</code> table. Here is a minimal <code>user/init.lua</code> file that disables the formatting on save:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      format_on_save </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">false</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- enable or disable automatic formatting on save</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have also added an extension to just <code>true</code> or <code>false</code> for this option to give more the user the ability to disable the auto formatting for specific filetypes. For example:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      format_on_save </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        enabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- enable format on save</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        ignore_filetypes </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- disable format on save for specified filetypes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token string" style="color:#98c379">&quot;markdown&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token string" style="color:#98c379">&quot;python&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you would rather use a whitelist of filetypes for formatting on save rather than a blacklist type model, you can do that as well with the <code>allow_filetypes</code> table. If you have <code>allow_filetypes</code> it will take presidence over <code>ignore_filetypes</code>. So please only use one of these options at a time. Here is an example:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      format_on_save </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        enabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- enable format on save</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        allow_filetypes </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- only allow formatting on save for these filetypes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token string" style="color:#98c379">&quot;lua&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token string" style="color:#98c379">&quot;python&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the formatting on save enabled, we have also provided the mapping <code>&lt;leader&gt;uf</code> to toggle the auto formatting temporarily along with the variable <code>vim.g.autoformat_enabled</code> which allows you to control whether the auto formatter runs on startup initially (<em>Note:</em> Format on save must be enabled in the <code>lsp.formatting</code> table for this option and keybinding to do anything).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controlling-formatting">Controlling Formatting<a class="hash-link" href="#controlling-formatting" title="Direct link to heading">​</a></h3><p>Since Neovim v0.8 there have been improvements to how language servers are used for formatting files. Previously Neovim could only use a single language server to format files at a time and would prompt on each format if multiple were available. This led to users disabling formatting capabilities for different language servers and losing that functionality all together for convenience. Now you are able to format with many formatters at the same time and filter them with a function. To empower this, AstroNvim has a configuration option for controlling what formatters are used. This can be done either with a filter function or a list of disabled clients. Here are a couple example <code>user/init.lua</code> contents that demonstrate each possibility.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-formatting-for-a-filter-function">Disabling formatting for a filter function<a class="hash-link" href="#disabling-formatting-for-a-filter-function" title="Direct link to heading">​</a></h4><p>using the <code>filter</code> option you can supply filter function to be run on each client that has formatting capabilities and if it returns <code>true</code> then it will be used for formatting and if it returns <code>false</code> then it will not be used. This applies to whenever you format your code either on save, with <code>&lt;leader&gt;lf</code>, or with <code>:Format</code>.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      filter </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- disable formatting for sumneko_lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">if</span><span class="token plain"> client</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">name </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;sumneko_lua&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- only enable null-ls for javascript files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">if</span><span class="token plain"> vim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">bo</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">filetype </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;javascript&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> client</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">name </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;null-ls&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- enable all other clients</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token keyword" style="color:#c678dd">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-formatting-for-a-list-of-language-servers">Disabling formatting for a list of language servers<a class="hash-link" href="#disabling-formatting-for-a-list-of-language-servers" title="Direct link to heading">​</a></h4><p>using the <code>disabled</code> option you can supply an array like list of language server client names and those clients will be disabled with you format your code either on save, with <code>&lt;leader&gt;lf</code>, or with <code>:Format</code>.</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      disabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;sumneko_lua&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;rust_analyzer&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-both-filter-function-and-disabled-list">Using both filter function and disabled list<a class="hash-link" href="#using-both-filter-function-and-disabled-list" title="Direct link to heading">​</a></h4><p>When using the options together, a client listed in the <code>disabled</code> list will always be disabled and then all other clients will then be passed into the <code>filter</code> function. For example, we can simplify our previous <code>filter</code> function by just disabling the <code>sumneko_lua</code> client in the <code>disabled</code> table:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      disabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;sumneko_lua&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      filter </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- only enable null-ls for javascript files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">if</span><span class="token plain"> vim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">bo</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">filetype </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;javascript&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> client</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">name </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;null-ls&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- enable all other clients</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-other-formatting-options">Configure other formatting options<a class="hash-link" href="#configure-other-formatting-options" title="Direct link to heading">​</a></h4><p>We have also provided an option in the <code>lsp.formatting</code> table for easily enabling and disabling automatic formatting on save with <code>lsp.formatting.format_on_save</code>.</p><p>The <code>lsp.formatting</code> option also allows you to specify other parameters for the <code>vim.lsp.buf.format()</code> call. Any of the other formatting options are allowed to be used here to be used as the default options. This means being able to easily adjust the default <code>timeout_ms</code> for formatting in AstroNvim or making asynchronous formatting the default. For example you can do the following to increase the formatting timeout along with adjust the filtering:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    formatting </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      format_on_save </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- enable or disable automatic formatting on save</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      timeout_ms </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token number" style="color:#d19a66">3200</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- adjust the timeout_ms variable for formatting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      disabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;sumneko_lua&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      filter </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- only enable null-ls for javascript files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">if</span><span class="token plain"> vim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">bo</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">filetype </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;javascript&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> client</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">name </span><span class="token operator" style="color:#c678dd">==</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;null-ls&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- enable all other clients</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsp-setup-without-installer">LSP Setup Without Installer<a class="hash-link" href="#lsp-setup-without-installer" title="Direct link to heading">​</a></h3><p>AstroNvim comes with <a href="https://github.com/williamboman/mason-lspconfig.nvim" target="_blank" rel="noopener noreferrer">mason-lspconfig</a> as an easy interface for setting up and installing language servers, but this might not be adequate for all users. The LSP installer doesn&#x27;t support all of the language servers that Neovim&#x27;s LSP config supports and some users may already have the language servers installed on their machine and don&#x27;t want to reinstall it separately. In these cases we have added an easy interface for setting up these servers. The following is a minimal <code>user/init.lua</code> file that simply sets up <code>pyright</code> language server for a user with <code>pyright</code> already available on their system:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    servers </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token string" style="color:#98c379">&quot;pyright&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the user wants to configure server specific settings and configurations then they can do this with the <code>lsp.server-settings</code> table as well. For example if the user wants to use <code>pyright</code> that is already available on their system and disable the single file support then can do the following:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    servers </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token string" style="color:#98c379">&quot;pyright&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;server-settings&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      pyright </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        single_filesupport </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">false</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsp-specific-plugins">LSP Specific Plugins<a class="hash-link" href="#lsp-specific-plugins" title="Direct link to heading">​</a></h3><p>There are some plugins available for doing advanced setup of language servers that require the user to not use the <code>lspconfig</code> setup call and instead use their own plugin setup for handling this. AstroNvim provides a nice way to do this while still using <code>mason-lspconfig</code> for installing the language servers. You can use the <code>lsp.skip_setup</code> table for specifying which language servers to guarantee AstroNvim will not automatically call the <code>lspconfig</code> setup for. We also provide a helper function for getting the AstroNvim default server configuration like our built in <code>capabilities</code>, <code>on_attach</code>, as well as the user defined options in <code>lsp.server-settings</code>. Here is a couple examples for some common LSP plugins:</p><p><strong><a href="https://github.com/jose-elias-alvarez/typescript.nvim" target="_blank" rel="noopener noreferrer">typescript.nvim</a></strong></p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    skip_setup </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;tsserver&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  plugins </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    init </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;jose-elias-alvarez/typescript.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        after </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;mason-lspconfig.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        config </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token function" style="color:#e5c07b">require</span><span class="token punctuation" style="color:#777d86">(</span><span class="token string" style="color:#98c379">&quot;typescript&quot;</span><span class="token punctuation" style="color:#777d86">)</span><span class="token punctuation" style="color:#777d86">.</span><span class="token function" style="color:#e5c07b">setup</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">            server </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> astronvim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">lsp</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">server_settings </span><span class="token string" style="color:#98c379">&quot;tsserver&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;mason-lspconfig&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      ensure_installed </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;tsserver&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><a href="https://github.com/p00f/clangd_extensions.nvim" target="_blank" rel="noopener noreferrer">clangd_extensions.nvim</a></strong></p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    skip_setup </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;clangd&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;server-settings&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      clangd </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        capabilities </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          offsetEncoding </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;utf-8&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  plugins </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    init </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;p00f/clangd_extensions.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        after </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;mason-lspconfig.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- make sure to load after mason-lspconfig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        config </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token function" style="color:#e5c07b">require</span><span class="token punctuation" style="color:#777d86">(</span><span class="token string" style="color:#98c379">&quot;clangd_extensions&quot;</span><span class="token punctuation" style="color:#777d86">)</span><span class="token punctuation" style="color:#777d86">.</span><span class="token function" style="color:#e5c07b">setup</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">            server </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> astronvim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">lsp</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">server_settings </span><span class="token string" style="color:#98c379">&quot;clangd&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;mason-lspconfig&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      ensure_installed </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;clangd&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><a href="https://github.com/akinsho/flutter-tools.nvim" target="_blank" rel="noopener noreferrer">flutter-tools.nvim</a></strong></p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    skip_setup </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;dartls&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- skip lsp setup because flutter-tools will do it itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;server-settings&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      dartls </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token comment" style="color:#777d86">-- any changes you want to make to the LSP setup, for example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        color </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          enabled </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        settings </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          showTodos </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          completeFunctionCalls </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">true</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  plugins </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    init </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;akinsho/flutter-tools.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        requires </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;nvim-lua/plenary.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        after </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;mason-lspconfig.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- make sure to load after mason-lspconfig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        config </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token function" style="color:#e5c07b">require</span><span class="token punctuation" style="color:#777d86">(</span><span class="token string" style="color:#98c379">&quot;flutter-tools&quot;</span><span class="token punctuation" style="color:#777d86">)</span><span class="token punctuation" style="color:#777d86">.</span><span class="token function" style="color:#e5c07b">setup</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">            lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> astronvim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">lsp</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">server_settings </span><span class="token string" style="color:#98c379">&quot;dartls&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- get the server settings and built in capabilities/on_attach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;mason-lspconfig&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      ensure_installed </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;dartls&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- install dartls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><a href="https://github.com/simrat39/rust-tools.nvim" target="_blank" rel="noopener noreferrer">rust-tools.nvim</a></strong></p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#1e222a;--prism-color:#abb2bf"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#abb2bf"><span class="token keyword" style="color:#c678dd">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  lsp </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    skip_setup </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;rust_analyzer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- skip lsp setup because rust-tools will do it itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  plugins </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    init </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token string" style="color:#98c379">&quot;simrat39/rust-tools.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        after </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;mason-lspconfig.nvim&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- make sure to load after mason-lspconfig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        config </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c678dd">function</span><span class="token punctuation" style="color:#777d86">(</span><span class="token punctuation" style="color:#777d86">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token function" style="color:#e5c07b">require</span><span class="token punctuation" style="color:#777d86">(</span><span class="token string" style="color:#98c379">&quot;rust-tools&quot;</span><span class="token punctuation" style="color:#777d86">)</span><span class="token punctuation" style="color:#777d86">.</span><span class="token function" style="color:#e5c07b">setup</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">            server </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> astronvim</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">lsp</span><span class="token punctuation" style="color:#777d86">.</span><span class="token plain">server_settings </span><span class="token string" style="color:#98c379">&quot;rust_analyzer&quot;</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- get the server settings and built in capabilities/on_attach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">          </span><span class="token punctuation" style="color:#777d86">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">        </span><span class="token keyword" style="color:#c678dd">end</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">[</span><span class="token string" style="color:#98c379">&quot;mason-lspconfig&quot;</span><span class="token punctuation" style="color:#777d86">]</span><span class="token plain"> </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">      ensure_installed </span><span class="token operator" style="color:#c678dd">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">{</span><span class="token plain"> </span><span class="token string" style="color:#98c379">&quot;rust_analyzer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"> </span><span class="token comment" style="color:#777d86">-- install rust_analyzer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">    </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain">  </span><span class="token punctuation" style="color:#777d86">}</span><span class="token punctuation" style="color:#777d86">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#abb2bf"><span class="token plain"></span><span class="token punctuation" style="color:#777d86">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/nightly/Recipes/black_belt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Black Belt Example User Configs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/nightly/Recipes/alpha"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Dashboard Customizations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#customizing-auto-format-on-save" class="table-of-contents__link toc-highlight">Customizing auto-format on save</a></li><li><a href="#controlling-formatting" class="table-of-contents__link toc-highlight">Controlling Formatting</a></li><li><a href="#lsp-setup-without-installer" class="table-of-contents__link toc-highlight">LSP Setup Without Installer</a></li><li><a href="#lsp-specific-plugins" class="table-of-contents__link toc-highlight">LSP Specific Plugins</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.04c6d08e.js"></script>
<script src="/assets/js/main.6be3225d.js"></script>
</body>
</html>